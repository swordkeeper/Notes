# Python çš„ä¸€äº›åŸºç¡€



### ç®€å•çš„PythonçŸ¥è¯†ç‚¹

1. zip æ‰“åŒ…ä¸¤ä¸ªåˆ—è¡¨ï¼Œä½¿ä»–ä»¬ä¸€ä¸€æ‰¹å¯¹

    ```python
       name = ['name','age','salary']
       values = ['bob',42,20000]
       zip(name,values) # produce a zip obj
       people1 = dict(zip(name,values))  #å°†ç»‘å®šçš„zipå¯¹è±¡è½¬åŒ–æˆå­—å…¸
       # return {'name':'bob','age':42,'salary':20000}
    ```

2. eval å’Œ repr 

    ```python
    # eval() æŠŠstr å˜æˆ å…¶å€¼æ‰€å¯¹åº”çš„å†…å®¹
    sss = '2'
    type(eval(sss)) # return 2
    # repr() æŠŠå€¼å˜ä¸ºå­—ç¬¦ä¸²
    repr(2) #è¿”å›'2'
    ```

3.  map

       ```python
       people = ['bob','LiLi']
       getInitCapital = map((lambda x: x[0]), people)
       # map å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°åï¼Œmapä¼šå¯¹ç¬¬äºŒä¸ªå‚æ•°åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°
       list(getInitCapital) # è¿”å›åˆ—è¡¨
       ```

4. enumerate() è¿­ä»£å™¨

    ```python
    myList = [1,"abc","hello",222]
    for x,y in enumerate(myList):
        print(x)
        print(y)
    # è¿”å›
    """
    0
    1
    1
    abc
    2
    hello
    3
    222
    """
    ```

    

### Python åŒ…çš„å»ºç«‹

1. ç¬¬ä¸€æ­¥å»ºç«‹ä¸€ä¸ª``æ–‡ä»¶å¤¹ğŸ“``ï¼Œç»™æ–‡ä»¶å¤¹èµ·åŒ…çš„åå­—ï¼Œæ¯”å¦‚``calc``æ–‡ä»¶å¤¹

2. åœ¨æ–‡ä»¶å¤¹ä¸­æ”¾å…¥éœ€è¦æ‰“åŒ…çš„``.py``æ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œ``add.py``å’Œ``substract.py``

3. åœ¨æ–‡ä»¶å¤¹ä¸‹å†™å…¥ä¸€ä¸ª``__init__.py``æ–‡ä»¶

4. åœ¨æ–‡ä»¶ä¸­å†™å…¥

   ```python
   # __init__.py æ–‡ä»¶
   from . import add
   from . import substract   # . ä»£è¡¨å½“å‰ç›®å½•ï¼Œä¹Ÿå°±æ˜¯å’Œ __init__.py åŒçº§çš„add.py å’Œ substract.pyæ–‡ä»¶
   # __init__.py æ–‡ä»¶çš„ä½œç”¨æ˜¯ï¼Œç»™æ–‡ä»¶å¤¹æ·»åŠ ä¸€ä¸ªç´¢å¼•ï¼Œç”¨äºå€’å…¥pythonåŒ…
   ```

5. æ­£å¸¸æ–‡ä»¶å¼•å…¥åŒ…

   ```python
   import calc
   ```



### Python å‹ç¼©åŒ…

1. å»ºç«‹ä¸€ä¸ª``setup.py``æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å’Œéœ€è¦æ‰“åŒ…çš„``calc``åŒçº§

2. ``setup.py``æ–‡ä»¶ä¸­å†™å…¥

   ```python
   from distutils.core import setup
   
   # å†™å…¥å‡ ä¹å›ºå®šçš„å†…å®¹ï¼Œè°ƒç”¨setupå‡½æ•°
   setup(
     name="calc", #åŒ…å
     version="1.0", 
     description="è®¡ç®—å™¨åŒ…"  #ç®€è¿°
     long_description="è®¡ç®—åŠ å‡ä¹˜é™¤åŒ…" #è¯¦è¿°
     author="zusz"
     author_email="xxxx@.com"
     url="www.mainpage.com" #ä¸»é¡µ
     py_modules=[   #åŒ…ä¸­è¦å‘å¸ƒçš„å†…å®¹
       "calc.add",
       "cacl.substract"
     ]
   )
   ```

3. æ‰§è¡Œsetupå‡½æ•°

   ```bash
   python3 setup.py build
   ```

4. å‘å¸ƒ

   ```bash
   python3 setup.py sdist
   ```

   è¯¥å‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªå‹ç¼©åŒ…``calc-1.0.tar.gz``ï¼Œä»è€Œå¯ä»¥åˆ†äº«ç»™å…¶ä»–äºº

5. æ¥å—å‹ç¼©åŒ…å¹¶è§£å‹

   ```bash
   tar xvfz calc-1.0.tar.gz  #è§£å‹
   cd calc-1.0  # è¿›å…¥è§£å‹åçš„æ–‡ä»¶å¤¹
   sudo python3 setup.py install
   ```

   è§£å‹åå®‰è£…çš„åŒ…ä¸€èˆ¬ä¼šè¢«å®‰è£…åˆ°``/usr/local/lib/python3.xx/dist-packages``ï¼Œå³localç¯å¢ƒä¸‹ã€‚è¿™æ ·å°±å¯ä»¥åœ¨å…¨å±€ä½¿ç”¨``import calc``pythonå€’å…¥å‘½ä»¤äº†ã€‚

6. åˆ é™¤æŸä¸ªå®‰è£…å¥½çš„æ¨¡å—

   ```bash
   cd /usr/local/lib/python3.xx/dist-packages  #åˆ‡æ¢åˆ°æ¨¡å—å®‰è£…ç›®å½•
   sudo rm -rf calc* #åˆ é™¤è¯¥åŒ…æ–‡ä»¶ä»¥åŠç›¸å…³ä¿¡æ¯æ–‡ä»¶ï¼Œå°±å¯ä»¥äº†
   ```



### Python ç¼–ç å…¼å®¹æ€§

Python2.x é»˜è®¤ä½¿ç”¨çš„æ˜¯``ASCII``ç¼–ç 

Python3.xé»˜è®¤ä½¿ç”¨çš„æ˜¯``UTF-8``ç¼–ç ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œpython3 æ”¯æŒä¸­æ–‡ç­‰ç‰¹æ®Šå­—ç¬¦



æ¼”ç¤ºä»£ç å¦‚ä¸‹``test.py``

```python
myStr = "ä½ å¥½ä¸–ç•Œ"
print(myStr)

for c in myStr:
  print(c)
```

åœ¨Python3 ä¸‹æ‰§è¡Œï¼Œæ²¡æœ‰é—®é¢˜è¾“å‡º

```
ä½ å¥½ä¸–ç•Œ
ä½ 
å¥½
ä¸–
ç•Œ
```

1. ä½†æ˜¯åœ¨python2ä¸‹æ‰§è¡Œï¼Œä¼šæŠ¥é”™ï¼Œé”™è¯¯ç±»å‹ä¸º``SyntaxError: Non-ASCII character '\xe4' in file``ã€‚

   - æ­¤å¤„è¯´æ˜python2 æ— æ³•è§£æä»£ç ``test.py``ä¸­çš„éASCIIå­—ç¬¦ï¼ˆä¸­æ–‡ï¼‰

   - è§£å†³æ–¹æ³•ï¼Œåœ¨test.pyé¦–è¡Œæ·»åŠ 

     ```python
     # *-* coding:utf-8 *-*
     ```

     or
     
     ```python
     #coding=utf-8
     ```
     
     è¿™æ ·python2è§£æå™¨å°±èƒ½è§£æä»£ç ä¸­çš„ä¸­æ–‡å­—ç¬¦äº†

2. ä½†æ˜¯è¾“å‡ºæ‰”ä¼šæˆä¸ºè¿™æ ·

   ```
   ä½ å¥½ä¸–ç•Œ
   ?
   ?
   ?
   ?
   ?
   ?
   ?
   ?
   ?
   ?
   ?
   ?
   ```

   - åŸå› æ˜¯å› ä¸ºï¼Œè™½ç„¶è§£æå™¨çŸ¥é“å­—ç¬¦ä¸²myStræ˜¯utfç¼–ç ï¼ˆè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆèƒ½è¾“å‡ºï¼šä½ å¥½ä¸–ç•Œï¼‰ã€‚

   - ä½†æ˜¯åœ¨å½“å¾ªç¯æ‰§è¡Œæ—¶ï¼Œè§£æå™¨ä»ç„¶æŒ‰ç…§``ASCII``è§£æå™¨çš„æ–¹æ³•ï¼Œ å³ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„è§£æ(unicode å 1-3ä¸ªå­—èŠ‚ï¼‰ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå½“å¾ªç¯æ—¶ï¼Œä¸èƒ½æ­£ç¡®è¾“å‡ºã€‚

   - è§£å†³æ–¹æ³•

     ```python
     myStr = u"ä½ å¥½ä¸–ç•Œ"  # ç»™å­—ç¬¦ä¸²æŒ‡æ˜ç¼–ç æ ¼å¼ï¼Œåœ¨å­—ç¬¦ä¸²å‰é¢æ·»åŠ  u
     ```




### è¿­ä»£å™¨

- è¿­ä»£å™¨å®ä¾‹

    ```python
    from collections import Iterable
    
    class Classmate(object):
        def __init__(self):
            self.names = list()  #å­¦ç”Ÿåˆ—è¡¨
        def add(self,name):
            self.names.append(name)
        def __iter__(self):  # å¦‚æœæƒ³è®©ç±» Classmate å¯ä»¥è¿­ä»£ï¼Œéœ€è¦å®Œå–„è¯¥ç±»
            return ClassIterator(self)    # for tmp in xx: å®é™…ä¸Šæ˜¯è°ƒç”¨è¯¥å¯¹è±¡çš„__iter__æ–¹æ³•ï¼Œ
                                      # è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡
    
    class ClassIterator(object):
        '''
        è¿­ä»£å™¨å¯¹è±¡ä¼šä¸€æ­¥æ­¥çš„è°ƒç”¨__next__æ–¹æ³•ï¼Œè¿”å›è°ƒç”¨è€…çš„æ¯ä¸€ä¸ªå†…éƒ¨å¯¹è±¡
        '''
        def __init__(self,obj):   # è¿­ä»£å™¨è·å–classmateå¯¹è±¡æŒ‡é’ˆ
            self.obj = obj
            self.count = -1   # å®šä¹‰è¿­ä»£å™¨çš„è®¡æ•°å™¨
            self.len = len(self.obj.names)
        def __iter__(self):
            pass
        def __next__(self):
            if self.count < self.len -1:
                self.count += 1
                return self.obj.names[self.count]  # æ¯æ¬¡å¾ªç¯nextè¿”å›ä¸‹ä¸€ä¸ªå¯¹è±¡
            else:
                raise StopIteration
    
    classmate = Classmate()
    classmate.add("è€ç‹")
    classmate.add("è€æ")
    classmate.add("å¼ ä¸‰") #æ·»åŠ äº†ä¸‰ä¸ªå­¦ç”Ÿ
    
    print(isinstance(classmate, Iterable)) # è¿”å›True å› ä¸ºç±»classmateæ˜¯Classmateç±»çš„å®ä¾‹
                                           # è€Œå› ä¸ºè¯¥ç±»å®ç°äº† __iter__æ–¹æ³•ï¼Œå› è€Œå¯ä»¥è¿­ä»£
    
    for i in classmate:
        print(i)
    ```

    è¿­ä»£å™¨æ³¨æ„äº‹é¡¹

    1. ä¸€ä¸ªç±»å¯¹è±¡è¦å®ç°è¿­ä»£åŠŸèƒ½ï¼Œåˆ™éœ€è¦å®ç°``__iter__``å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¿™æ ·è¯¥ç±»å¯¹è±¡æ‰æ˜¯``Iterable``
    2. è¿­ä»£å™¨ç±»è¦æœ‰ä¸€ä¸ª``__next__``æ–¹æ³•ï¼Œå®šä¹‰æ¯æ¬¡å¾ªç¯è¿­ä»£æ—¶è¿”å›çš„å†…å®¹ã€‚
    3. æ¯æ¬¡è¿­ä»£æ—¶è¦è¿”å›ä¸åŒç´¢å¼•ä½ç½®çš„å†…å®¹ï¼Œéœ€è¦åœ¨è¿­ä»£å™¨å†…éƒ¨å®šä¸€ä¸ª``index``æ¥ä¿å­˜å½“å‰è¿­ä»£ä½ç½®
    4. è¿­ä»£å™¨ä¸ä¼šè‡ªåŠ¨åˆ¤æ–­åœæ­¢ï¼Œè‹¥è¦åœæ­¢ï¼ˆæ¯”å¦‚è¯´è¿­ä»£å®Œæˆï¼‰åˆ™éœ€è¦å‘èµ·``raise StopIteration``å¼‚å¸¸ä¸­æ–­
    5. ä¸€ä¸ªç±»å®ç°è¿­ä»£åŠŸèƒ½ä¹Ÿå¯ä»¥ä¸ ``å®šä¹‰è¿­ä»£å™¨ç±»``ï¼Œåªè¦åœ¨``__iter__``å‡½æ•°æ—¶è¿”å›è‡ªå·±``self``ï¼Œå¹¶åœ¨è‡ªèº«å‡½æ•°å†…å®ç°``__next__``å³å¯
    
    ###### è¿­ä»£å™¨çš„ä¼˜åŠ¿
    
    è¿­ä»£å™¨å’Œç›´æ¥è¿”å›ä¸€ä¸ªåˆ—è¡¨çš„åŒºåˆ«æ˜¯ï¼Œè¿­ä»£å™¨ä¸ä¼šç”Ÿæˆæ‰€æœ‰çš„è¿”å›å†…å®¹ï¼Œç±»ä¼¼äº``range å’Œ xrange``çš„åŒºåˆ«ã€‚è¿­ä»£å™¨è¿”å›çš„æ˜¯ä¸€ç§ç”Ÿæˆç»“æœçš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„æ•°æ®ã€‚æ¯”æ–¹è¯´range(10)ï¼Œä¼šè¿”å›ä¸€ä¸ª10ä¸ªæ•°å­—çš„åˆ—è¡¨ï¼Œè€Œxrange(10)ï¼Œæ¯æ¬¡è¿­ä»£åˆ™åŠ¨æ€è¿”å›çš„æ˜¯æ¯æ¬¡çš„ç”Ÿæˆå†…å®¹ã€‚å†æ¯”å¦‚range(10000000000)ï¼Œæœºå™¨ä¼šå¡æ­»ï¼Œè€Œxrange(10000000000)ï¼Œä¸ä¼šã€‚
    
- Fibonacci è¿­ä»£å™¨ä¸¾ä¾‹ï¼ˆå®ç°äº†ä¸ç”¨åˆ—è¡¨å­˜å‚¨Fibonacciå€¼)

    ```python
    #coding=utf-8
    import time
    class Fibonacci(object):
        def __init__(self,num):
            self.num = num
            self.a = 0
            self.b = 1
            self.index = 1
        def __next__(self):  # è¿­ä»£å™¨æ¯æ¬¡æ¯”è¾ƒè¿­ä»£æ¬¡æ•°
            if self.index <= self.num:
                if self.index == 1:
                    self.index += 1
                    return self.a
                elif self.index == 2:
                    self.index += 1
                    return self.b
                else:
                    self.a , self.b = self.b , self.a+self.b  #Fibonacciç®—æ³•
                    self.index += 1
                    return self.b
            else:
                raise StopIteration  # è¿­ä»£ä¸Šé™
        def __iter__(self):
            return self
    
    def main():
        for i in Fibonacci(10):
            time.sleep(1)
            print(i)
    
    if __name__ == "__main__":
        main()
    ```



### ç”Ÿæˆå™¨

ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªç§ç‰¹æ®Šçš„è¿­ä»£å™¨

- ç”Ÿæˆå™¨å®ä¾‹

    ```python
    def create_fibonacci(all_num):  # å®šä¹‰ä¸€ä¸ªå‡½æ•°
        a, b = 0, 1
        current_num = 0
        while current_num < all_num:
            # print(a)
            yield a                 # ä¸€ä¸ªå‡½æ•°ä¸­å¦‚æœå‡ºç°yieldï¼Œ åˆ™è¯¥å‡½æ•°å°±ä¸æ˜¯å‡½æ•°äº†ï¼Œå°±æ˜¯ç”Ÿæˆå™¨
            a, b = b, a+b
            current_num += 1
    
    obj = create_fibonacci(10)     # ç”Ÿæˆå™¨è¿™æ ·å†™ï¼Œè€Œä¸”ï¼Œæ­¤å¤„ä¸å†æ˜¯è°ƒç”¨å‡½æ•°ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡
    for num in obj:                # ç”Ÿæˆå™¨è¿­ä»£æ—¶ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä»å‡½æ•° defå¼€å¤´å‘ä¸‹èµ°ï¼Œ
      	print(num)								 # èµ°åˆ°yieldå¤„è¿”å›ï¼Œç±»ä¼¼äºè¿­ä»£å™¨ä¸­çš„__next__å‡½æ•°çš„returnã€‚å¹¶ä¸”å‡½æ•°é˜»å¡åœ¨yieldå¤„
                                   # ç›´åˆ°å‡½æ•°ä¸‹ä¸€æ¬¡è¿­ä»£æ—¶å”¤é†’ï¼Œå¹¶ç»§ç»­å¾ªç¯
        
    ```

- ç”Ÿæˆå™¨æ³¨æ„äº‹é¡¹

    1. ç”Ÿæˆå™¨ä¸æ˜¯å‡½æ•°ï¼Œè°ƒç”¨ä»–ä¼šè¿”å›objå¯¹è±¡
    2. ç”Ÿæˆå™¨ä¸­æœ‰``yield``ï¼Œä»–çš„åŠŸèƒ½ç±»ä¼¼äº``return``ï¼Œç±»ä¼¼äº``__next__``è¿­ä»£å™¨ä¸­çš„è¿”å›
    3. ç”Ÿæˆå™¨åªæœ‰ç¬¬ä¸€éä»å¤´å¼€å§‹æ‰§è¡Œï¼Œæ¯æ¬¡å¾ªç¯è¿­ä»£``yield``è¿”å›åï¼Œç”Ÿæˆå™¨ä¼šé˜»å¡ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡éœ€è¦è¿­ä»£æ—¶è§£é™¤é˜»å¡ã€‚

- ç”Ÿæˆå™¨ä¹Ÿå¯ä»¥ç”¨å‡½æ•°``next(obj)``æ¥å¾ªç¯ï¼Œæˆ–è€…``obj.send("hahah")``ã€‚send å¯ä»¥ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œç”¨å¦‚ä¸‹æ–¹æ³•æ¥æ¥å—``arg = yield a``ï¼Œè¿™æ ·é€šè¿‡sendå‘é€çš„æ•°æ®å°±ä¼šè¢«argæ¥æ”¶

    